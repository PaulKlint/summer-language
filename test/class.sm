class test1(f1, f2)
begin	fetch f2, f3: getf3, f5, _o1_, ++ , f6;
			# f6 added because of field table error #
	store f3, f4: setf4;

	var f3 := 1000;
	var f3_cnt := 0;

	proc getf3()
	(	put(f3_cnt := f3_cnt + 1, '\n'); return(f3));

	var f4 := -1;

	proc setf4(v)
	(	put(f1, '.setf4: f4 = ', v, '\n');
		f4 := v;
		return(v)
	);

	proc f5(a)
	(	var c := f2*f2 - a;

		put(f1, '.f5 returns ', c*c,'\n');
		return(c*c)
	);

	proc f6()
		pforward;

	proc pforward()
		put(f1, ': ', f2, ' ', f3, ' ', f4, '\n');

	op _o1_ (a)
	(return(f2 * a.f2));

	op _o1_ ()
	(return(f2 * f2));

	op ++ (a)
	(return(f2 + a.f2));

	op ++ ()
	(return(f2 + f2));

	init:
		var x, y;

		x := y := 7;
		f6();
		f3 := f4 := _o1_ self;
		f6()
end test1;

class test2(f1)
begin	fetch f1, f2, f3;

	proc f2(a,b,c)
	return(a*b*c);

	proc f3(d)
	return(++d + ++d);
end test2;

op ++ (a, b) return(a + b);

op _o1_ (a) return(a - 1);

program class2()
(	var c1 := test1('c1',1), c2 := test1('c2',2), x, c3;

	put(c1.f2, ' ', c1.f3, ' ', c2.f2, ' ', c2.f3, '\n');
	c1.f3 := 3;
	put(c1.f3, ' ', c2.f3, '\n');
	c1.f4 := c2.f4 := 5;
	c2.f3 := c1.f5(1);
	put(c2.f3, '\n');
	put(c1 _o1_ c2, ' ', _o1_ c1, ' ',c1 ++ c2, ' ', ++c2, ' ', 8 + 5, '\n');
	c3 := test2(10);
	put(c3.f2(1,2,3), ' ', c3.f3(c1), '\n');
	put(c2.f5(4), '\n');
	put(3 ++ 4, ' ', _o1_ 5, '\n');
);
#
c1: 1 1000 -1
c1: 1 1 1
c2: 2 1000 -1
c2: 2 4 4
1 1 2 4
3 4
c1.setf4: f4 = 5
c2.setf4: f4 = 5
c1.f5 returns 0
0
2 1 3 4 13
6 4
c2.f5 returns 0
0
7 4
#
