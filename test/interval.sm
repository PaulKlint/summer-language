#					#
# intervals				#
#					#

proc error(n) put('\nERROR: ', n, '\n');

#
class interval(from, to, by)
begin fetch next;
	proc next(state)
	( var cur := if state = undefined then from else state + by fi;
	  if (from < to & cur <= to) | (from > to & cur >= to) then
	     return([cur, cur])
	  else
	     freturn
	  fi
	);
end interval;
#

proc t(from, to, by, test)
( var i := from, x, y;

  y := interval(from, to, by);
  for x in y
  do
     if i ~= x then error(test) fi;
     i := i + by
  od;
  if i = to + by | i = from
  then
     return
  else
     error(test + 1)
  fi;
);

program tinterval ()
(
  var x;

  t(0, 10, 1, 0);
  t(10, 0, 1, 20);
  t(10, 0, -1, 30);
  t(real(0), 10, 1, 40);
  t(0, real(10), 1, 50);
  t(0, 10, real(1), 60);
  t(real(10), 0, -1, 70);
  t(10, real(0), -1, 80);
  t(10, 0, real(-1), 90);
)
