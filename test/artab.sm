#					#
# artab	-- arrays and tables		#
#					#

include 'heading.sm';

program artab()
( var a1, a2, a3, t1, t2, t3, n;

  start('artab');
  test(n := 0);
  a1 := [0, 1, 2];
  if a1.size ~= 3 then error(n+0) fi;
  if a1[0] ~= 0 then error(n+1) fi;
  if a1[1] ~= 1 then error(n+2) fi;
  if a1[2] ~= 2 then error(n+3) fi;

  test(n := 10);
  a2 := array [0, 1, 2];
  if a2.size ~= 3 then error(n+0) fi;
  if a2[0] ~= 0 then error(n+1) fi;
  if a2[1] ~= 1 then error(n+2) fi;
  if a2[2] ~= 2 then error(n+3) fi;

  test(n := 20);
  a3 := array (3, 0) init [0, 1, 2];
  if a3.size ~= 3 then error(n+0) fi;
  if a3[0] ~= 0 then error(n+1) fi;
  if a3[1] ~= 1 then error(n+2) fi;
  if a3[2] ~= 2 then error(n+3) fi;

  test(n := 30);
  a3 := array(3, 0);
  if a3.size ~= 3 then error(n+0) fi;
  if a3[0] ~= 0 then error(n+1) fi;
  if a3[1] ~= 0 then error(n+2) fi;
  if a3[2] ~= 0 then error(n+3) fi;

  test(n := 40);
  a1 := [1, 2, 3];
  a1[0] := 10;
  if a1[0] ~= 10 | a1[1] ~= 2 | a1[2] ~= 3 then error(n+0) fi;
  a1[1] := 20;
  if a1[0] ~= 10 | a1[1] ~= 20 | a1[2] ~= 3 then error(n+1) fi;
  a1[2] := 30;
  if a1[0] ~= 10 | a1[1] ~= 20 | a1[2] ~= 30 then error(n+2) fi;

  test(n := 50);
  t1 := table(3, 'X');
  if t1.size ~= 0 then error(n+0) fi;
  if t1['a'] ~= 'X' then error(n+1) fi;
  t1['a'] := 'A';
  if t1.size ~= 1 then error(n+2) fi;
  if t1['a'] ~= 'A' then error(n+3) fi;

  test(n := 60);
  t2 := table(5, 'X') init ['a' : 'A', 'b' : 'B'];
  if t2.size ~= 2 then error(n+0) fi;
  if t2['a'] ~= 'A' then error(n+1) fi;
  if t2['b'] ~= 'B' then error(n+2) fi;
  if t2['c'] ~= 'X' then error(n+3) fi;
  t2['c'] := 'C';
  if t2.size ~= 3 then error(n+3) fi;
  if t2['c'] ~= 'C' then error(n+4) fi;

  test(n := 70);
  a1 := [1, 2, 3];
  t2 := [3.5: 'r3.5', 6 : 'i6', a1 : 'aa'];
  if t2[3.5] ~= 'r3.5' then error(n+0) fi;
  if t2[6] ~= 'i6' then error(n+1) fi;
  if t2[a1] ~= 'aa' then error(n+2) fi;
  t2[4.5] := 'r4.5';
  if t2[4.5] ~= 'r4.5' then error(n+3) fi;

  test(n := 80);
  t2 := [-3.5: 'r-3.5', -6: 'i-6', a1 : 'aa'];
  if t2[-3.5] ~= 'r-3.5' then error(n+0) fi;
  if t2[-6] ~= 'i-6' then error(n+1) fi;
  if t2[a1] ~= 'aa' then error(n+2) fi;

  finish('artab');
)
