: run all test programs. If called without arguments then run all programs,
: otherwise run only the programs passed as argument.
SUMMERBIN=/userfs1/summer/paulk/sys/bin
PARSER=${PARSER-$SUMMERBIN/parser}
INT=${INT-$SUMMERBIN/int.a}
SUMC=sumc
if test $# = 0
then progs=*.sm
else progs=$@
fi
for p in $progs
do	echo $p
	if test -r a.out
	then
		rm a.out
	fi
	if test -r tmp
	then
		rm tmp
	fi
	p=`basename $p .sm`
	case $p in


	errors)
		$SUMC errors
		for er in	arith1\
				arith2\
				arith3\
				arith4\
				arith5\
				arith6\
				array1\
				array2\
				array3\
				array4\
				bits1\
				bits2\
				bits3\
				bits4\
				bits5\
				table1\
				table2\
				integer1\
				integer2\
				string1\
				real1\
				stack1\
				mulas1\
				mulas2\
				conc1\
				conc2\
				rel1\
				rel2\
				fail1\
				fail2\
				fail3\
				subject1\
				subject2\
				subject3\
				call2\
				assert1\
				fetch\
				store
		do
			echo ""  >>tmp
			echo $er ----- error message follows   >>tmp
			a.out -s150 $er   >>tmp
		done
		;;
	*)	$SUMC $p; a.out >tmp
		;;
	esac
	if test -r $p.out
	then
		if diff tmp $p.out
		then
:			noop

		else
			echo "^^^^^^^^^^" DIFFERENCE WITH PREVIOUS OUTPUT
		fi
	elif test -r tmp
	then
		cat tmp
	fi
done
