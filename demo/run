: RUN some demonstration programs. If called without argument
: all programs are run and their output is compared with
: previous output. If called with arguments only the named
: programs are compiled and executed
if test $# = 0
then
   progs=*.sm
else
   progs=$@
fi
for p in $progs
do
   p=`basename $p .sm`
   echo "********" $p "*********"
   if test -r a.out
   then
      rm a.out
   fi
   if test -r tmp
   then
      rm tmp
   fi
   A=
   case $p in
   ack)		A="-s3000" ;;
   closure)	A=calls.out ;;
   infprec)	A="infprec.data" ;;
   tuples)	A="tuples.sm wang.sm" ;;
   wordcnt)	A="wordcnt.sm ack.sm" ;;
   *)		;;
   esac
   sumc $p
   a.out $A >tmp
   cat tmp
   if test -r $p.out
   then
         if diff tmp $p.out
         then
		echo ""
         else
               echo "!!!!!!!!!! DIFFERENCE WITH PREVIOUS OUTPUT"
         fi
   fi
done
