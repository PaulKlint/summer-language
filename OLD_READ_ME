INSTALLATION GUIDE FOR THE SUMMER SYSTEM


NOTES ON THIS PRERELEASE

	This is a prerelease of the SUMMER system, to be used for
experimental purposes only. This distribution differs slightly from a
final distribution version in the following respects:

1) Documentation is not yet complete.

2) In the implementation flexibility has been favoured at the cost
   of efficiency. For example, most of the time of the compiler
   is spent in reading and writing (completely symbolic) intermediate
   files.
   The SUMMER interpreter can be improved upon in several places.
   Again flexibility and portability was favoured over performance.
   Even the inner loop of the interpreter is written in C!
   The interpreter keeps the strings for all run-time error messages
   always in core, etc..



NOTES ON THE PDP11 VERSION


	This version is plagued by several size limitations:
1) The situation is really bad, though the compiler can be brought to execution,
   it has so little workspace that currently not even the empty program can
   be compiled on the PDP11 (45 or 70).
   At this moment the only sensible thing to do is to cross-compile from the
   VAX. It is not yet clear how much this can be improved.
2) The standard loader ("ld") contains a bug related to huge
   program sizes so you will have to install a new loader to get
   the system running. The sources of the cured versions of the loader
   are included in this distribution.
3) The PDP11 version on this tape is derived from an old version of
   the SUMMER system.


NOTES ON THE VAX VERSION


1) Does hardly use any of the VAX string instructions.
2) The binaries on this tape were produced under VMUNIX version 2.6
   (The Berkeley Virtual Memory UNIX system on the VAX).
   They can not be executed directly on a standard UNIX 32V system.


TAPE FORMAT

	This tape is in tar format, 9 track, 800 bpi. See UNIX programmers
manual for details of the tar format. Note that the version of tar as
distributed by Bell Labs is used; this implies that the record size is 512.
The command

	tar xv

will extract all information from the tape and leave it in your
current directory.

DIRECTORY STRUCTURE

	The current directory now contains the sources and binaries of the
SUMMER system.
The global subdirectory organisation is as follows:

	directory	files		comment

	.				current directory
			READ_ME		this file contains the information
					you are now reading
			RUN		shell file for regeneration of
					the SUMMER system (see below)

	bin				binaries of the system
			parser		first compiler scan.
			codgen		second compiler scan.
			prefix		assembly language file with
					definitions of intermediate code
					operators (used by codgen).
			int.a		library with the SUMMER interpreter.
					each translated program uses
					this library.

	comp				sources of the compiler
			parser.sm	scan 1
					This file is generated by a parser
					generator (pgen) from the three files:
			parser.ns	nextsymbol routines (lexical analyzer)
			parser.syn	syntax rules and actions
			parser.ud	user defined procedures.

			codgen.sm	scan 2
			mkpref.sm	utily program to generate the
					prefix file from
					int/summer.h and int/operator.h
			sumc.sh		shell command file that calls the
					consecutive compiler passes.

	demo				some demonstration programs.

	doc				documentation
			compiler.ms 	Describes the organization of
					the SUMMER compiler
			refman1.ms	reference manual, part I
			refman2.ms	describes semantics of the kernel.

			library.ms	reference manual, part II
					describes the SUMMER library of
					standard class definitions.
			anno?.ms	Annotated examples.
			summer.ms	An overview of the SUMMER programming
					language
			sumc.1		manual page for sumc command

			lex		directory with lexical definitions

			summer.lex	lexical definitions
			syn		directory with syntax rules
					Used as include (.so) file in
					refman.ms
			sem		directory with semantic rules
					Used as include file in refman.ms

			summer.syn	syntactic definitions

					(derived from the contents of syn)
			formdef.sm	an initial version
					of a formal definition of the SUMMER
					semantics
					(the contents of "sem" are derived
					 from this file)
			tracer.ms	describes the symbolic tracer

	int				sources of the interpreter
			summer.h	basic definitions.
			operator.h	intermediate code definitions.
			alloc.c		basic object allocation
			array.c		implements the array datatype
			bits.c		implements the bits datatype
			cache.c		recovery cache operations
			collect.c	garbage collector
			eval.c		interpreter (main loop)
			file.c		implements the file datatype
			icname.c	intermediate code names
			integer.c	implements the integer datatype
			interval.c	implements the interval datatype
			osint.c		operating system interface
			print.c		print procedures
			prof.c		profiling procedures
			real.c		implements real datatype
			scan.c		scanning procedures
			squeeze.c	contains dummy declarations for
					prof.c and tracer.c
			string.c	string procedures
			subr.c		miscellaneous built-in procedures
			table.c		implements the table datatype
			tracer.c	symbolic debugger
			util.c		miscellaneous procedures
					(contains "main" program)

	pgen				LL(1) parser generator with
					automatic error recovery.
			pgen		shell command file for "pgen" command"
			pg.sm		actual source. This file is derived
					from the following three files
					(using "pgen" itself):
			pg.ns		nextsym routines.
			pg.syn		syntax and actions
			pg.ud		user defined routines
			pglib		library used by pgen.
			manual.ms	pgen manual
			pgen.man.nr	pgen UNIX manual page
	test				a series of test programs

SYSTEM REGENERATION

	The regeneration of the SUMMER system is completely described by
the shell command "RUN" in the current directory.
This command can be used in several ways:

	RUN int		regenerates the interpreter
	RUN comp	regenerates the compiler
			(assuming the existence of a SUMMER compiler)
	RUN compbootVAX
			regenerates the SUMMER compiler on a bare VAX
			(i.e. without an existing SUMMER compiler)

	RUN compbootPDP11
			regenerates the SUMMER compiler on a bare PDP11

An optional second argument "install" will move the generated pieces of
the system to their final destination (i.e. the directory $DESTDIR,
see below).
An optional second argument "compare" will compare the generated pieces
of the system with their existing counterparts in the directory $SUMMERBIN.
On a bare machine (for example the VAX) the SUMMER system is regenerated
as follows:

	RUN int install
	RUN compbootVAX install

RUN is parameterized with four shell variables:

	N		No operation. If this shell variable is set to "-n"
			the system generation commands are only printed,
			but not executed.
	DESTDIR		indicates the directory where the binaries should go.
			If this variables is not redefined, the binaries
			are moved to the subdirectory "bin" of the
			current directory.
	MACHINE		indicates the machine for which the system is compiled.
			Two machines are actually supported: VAX and PDP11.
			If this variable is not redefined the VAX version is
			produced.
	SUMMERBIN	The directory where the binaries of the system
			reside currently. Default value "./bin".

To modify these variables, for example DESTDIR to "/usr/bin" and 
MACHINE to "PDP11", execute the above commands, prefixed in the
following way:

	DESTDIR=/usr/bin MACHINE=PDP11 RUN int

Or to see which commands will be executed to install the compiler under
the above conditions:

	N=-n DESTDIR=/usr/bin MACHINE=PDP11 RUN comp install

It is necessary to use a complete pathname as value for DESTDIR, and not
a pathname relative to the current directory, since RUN changes to other
directories and this invalidates relative pathnames.

Finally you must install the command file "comp/sumc", by moving that file
to a directory with executable programs. For example:

	mv comp/sumc /usr/bin/sumc

Note that sumc has been edited to reflect the current value of DESTDIR.
Hence be carefull when moving the binaries on your own!
	Having made these modifications you should copy "comp/sumc" to a directory
with executable programs. For example
	cp comp/sumc /usr/bin/sumc

After all these operations you can proceed in two directions:

	1) Run all test programs to exercise some parts
	   of the system.
		cd test
		run
		cd ..
	   Before each test program is compiled, its name is printed
	   on the standard output.
	   Some programs produce output, which is automatically
	   compared with previous output.
	2) Compile and run some of the demo programs.
		cd demo
		run
		cd ..


If there are any problems or questions don't hesitate to contact me.

	Paul Klint
	Mathematisch Centrum
	Kruislaan 413 1098 SJ  Amsterdam
	The Netherlands.

	telephone: (020) 5924126
	telex	 : 12571

GOOD LUCK!
