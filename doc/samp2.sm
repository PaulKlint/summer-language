proc s(a) ;

program x()
( var x, e, f := '';

  e := scan_string('(())()((()));()();()');
  x := e.bal(';:!', '(', ')');	s(e);

  e := scan_string('{xx(x())!xx}');
  e .bal('!', '({', '})') | f;
  x := e.bal('!', '(', ')');	s(e);

  e := scan_string('abc/def!ghi');
  x := e.bal('!/', '[(', ')]');	s(e);

  e := scan_string('x:=a+b[i]*(y+5); z:=3');
  x := e.bal(';', '([', ')]');	s(e);

  e := scan_string('[(<]>)()<>![]');
  x := e.bal('!', '([<', '>])');	s(e);
)
