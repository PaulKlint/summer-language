proc do_match(this_model, ex)
( var i, pat, curs, action;

  model := this_model;
  put('---------------------------------- ', modelname[model], '\n\n');
  i := 0;
  while i < ex.size - 1
  do
     subject_string := ex[i];
     pat     := ex[i+1];
     curs  := 0;
     INITIAL_ENV    := environment();
     CURRENT_ENV    := environment();
     put('\nsubject_string: ', subject_string, ' pattern: ', pat, '\n');
     if curs := match(curs, pat) then
        put('succeeds; cursor=', curs, '\n')
     else
        put('fails\n')
     fi;
     i := i + 2;
  od
);
program matchrc ()
( var i := 0, pat, curs, action, ex;
  ruletrace := 0;
  ex := [
	'abc',	'(''ab''|''a'')--''bc''',
	'abc',	'try <> ''ab'', ''a'' until ''bc'' yrt',
	'abc',	'try <> '''', act(x:=''Z'')--''Q'', act(x:=''Y'')--''abc'' until '''' yrt'
	];
  do_match(RECOVERY, ex);
)
